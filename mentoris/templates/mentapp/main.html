<!DOCTYPE html>
<html>
<head>
    <title>Select Volume & Chapter</title>
    <link rel="stylesheet" type="text/css" 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">  <link rel="stylesheet" type="text/css">
    <style>
      .form-group.required .control-label:after {
        content:"*";
        color:red;
      }
      .cell-link {
        color: blue;
        font-weight: bold;
        text-decoration: none;
        display: block;
        cursor: pointer; 
        }
    </style>
</head>
<body style="padding-left: 100px; padding-right: 100px;">
    <div class="bg-info container" style="height: 130px; margin-top: 20px; margin-bottom: 30px; padding: 10px;">
        <div class="row mb-5">
          <div class="col-md-6">
            {% load static %}
            <img src="{% static 'kontinua_foundation_logo.png' %}" alt="Responsive image" style="width: 450px;">
          </div>
          <div class="col-md-6" style="margin-top: 20px;">
                {% load static %}
                <img src="{% static 'default-profile.png' %}" alt="Responsive image" style="float: right; padding: 10px; width: 100px;">
          </div>
        </div>
      </div>
      <div class="col-md-6 mx-auto text-center" style="margin-top: 20px; margin-bottom: 40px;">
        <h2>Select a Chapter to get started!</h2>
      </div>

      <div class="input-group mb-3">
        <label class="input-group-text control-label" >Volume</label>
        <select class="form-select" id="volume" name="volume">
            {% for v in volumes %}
                <option value="{{ v }}" {% if v == volume_id %}selected{% endif %}>{{ v }}</option>
            {% endfor %}
        </select>
      </div>

      <!-- <div class="input-group mb-3">
        <label class="input-group-text control-label" >Chapters</label>
        <select class="form-select" id="chapter" name="chapters">
            {% for cl in chapter_locs %}
                <option value="{{ cl }}">{{ cl.title }}</option>
            {% endfor %}</select>
      </div> -->

    <div class="container mt-4">
        <h2>Chapters</h2>
        <table class="table table-bordered">
            <tbody>
                {% for cl in chapter_locs %}
                    <tr>
                        <td><a class="cell-link" chapter-id="{{ cl.chapter_id }}">{{ cl.title }}</a></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

<script>
    var selectedVolume = document.getElementById("volume").value;
        document.getElementById("volume").addEventListener("change", function() {
            selectedVolume = this.value;
            if (selectedVolume) {
                var redirectUrl = "/main/" + selectedVolume + "/";
                
                window.location.href = redirectUrl;
            }
        });

    document.querySelectorAll('.cell-link').forEach(function(cellLink) {
        cellLink.addEventListener('click', function(event) {
            event.preventDefault();
            var selectedChapter = this.getAttribute('chapter-id');
            
            var redirectUrl = "/main/" + selectedVolume + "/" + selectedChapter;
            window.location.href = redirectUrl;
        });
    });
</script>

      
</body>
</html>
